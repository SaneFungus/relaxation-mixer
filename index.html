<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="PrzestrzeÅ„ Relaksu - Binauralne dÅºwiÄ™ki 3D do medytacji i relaksacji">
  <meta name="theme-color" content="#0a0e14">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <title>ğŸ§ PrzestrzeÅ„ Relaksu â€” Binaural Mixer</title>
  
  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500&family=JetBrains+Mono&family=Outfit:wght@300;500;600&display=swap" rel="stylesheet">
  
  <!-- Styles -->
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- Aurora Animated Background -->
  <div class="aurora-bg"></div>

  <!-- Audio Context Activation Prompt -->
  <div class="audio-prompt" id="audioPrompt">
    <div class="audio-prompt-content">
      <div class="audio-prompt-icon"></div>
      <h1 class="audio-prompt-title">PrzestrzeÅ„ relaksu</h1>
      <p class="audio-prompt-text">
        ZaÅ‚Ã³Å¼ sÅ‚uchawki i pozwÃ³l dÅºwiÄ™kom otoczyÄ‡ ciÄ™ ze wszystkich stron.
      </p>
      <button class="btn-start" id="btnStart">WejdÅº w ciszÄ™</button>
    </div>
  </div>

  <!-- Main App Container -->
  <div class="app-container">
    
    <!-- Header -->
    <header class="header">
      <div class="logo">
        <span class="logo-icon">ğŸ§</span>
        <span>PrzestrzeÅ„ relaksu</span>
      </div>
      <div class="master-volume">
        <span>ğŸ”Š</span>
        <div class="range-wrapper">
          <div class="range-fill" id="masterVolumeFill"></div>
          <input type="range" id="masterVolume" min="0" max="100" value="80" aria-label="GÅ‚oÅ›noÅ›Ä‡ gÅ‚Ã³wna">
        </div>
      </div>
    </header>

    <!-- Session Selector -->
    <section class="session-selector">
      <div class="session-cards" id="sessionCards">
        <!-- Session cards will be generated by JS -->
      </div>
    </section>

    <!-- PANEL MEDYTACJI -->
    <section class="glass-panel meditation-panel">
      <h2 class="meditation-title" id="meditationTitle">Wybierz sesjÄ™</h2>
      
      <div class="playback-buttons" role="group" aria-label="Kontrola odtwarzania">
        <button class="btn-secondary" id="btnStop" aria-label="Zatrzymaj">â– </button>
        <button class="btn-play" id="btnPlay" aria-label="OdtwÃ³rz">â–¶</button>
      </div>
      
      <div class="volume-control">
        <span class="volume-icon">ğŸ”Š</span>
        <div class="range-wrapper">
          <div class="range-fill" id="voiceVolumeFill"></div>
          <input type="range" id="voiceVolume" min="0" max="100" value="100" aria-label="GÅ‚oÅ›noÅ›Ä‡ sesji">
        </div>
        <span class="volume-value" id="voiceVolumeValue">100%</span>
      </div>
      
      <div class="hrtf-controls">
        <div class="hrtf-toggle">
          <span>ğŸ§</span>
          <div class="toggle-switch active" id="hrtfToggle" role="switch" aria-checked="true" aria-label="PrzestrzeÅ„ 3D" tabindex="0"></div>
          <span style="font-size: 0.8rem; color: var(--text-secondary);">3D</span>
        </div>
        <div class="position-buttons" id="voicePosition" role="group" aria-label="Pozycja dÅºwiÄ™ku">
          <button class="btn-position" data-pos="left" aria-label="Lewa strona">â—€</button>
          <button class="btn-position selected" data-pos="center" aria-label="Åšrodek">â—</button>
          <button class="btn-position" data-pos="right" aria-label="Prawa strona">â–¶</button>
        </div>
      </div>
      
      <div class="progress-container">
        <span class="progress-time" id="currentTime">00:00</span>
        <div class="progress-bar" id="progressBar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
        <span class="progress-time" id="totalTime">00:00</span>
      </div>
      
      <div class="sync-toggle">
        <span style="font-size: 0.85rem;">Synchronizuj przestrzeÅ„ z koÅ„cem medytacji</span>
        <div class="toggle-switch" id="syncToggle" role="switch" aria-checked="false" aria-label="Synchronizacja" tabindex="0"></div>
      </div>
      
      <div class="loading-indicator" id="voiceLoading" role="status" aria-live="polite">
        <div class="spinner"></div>
        <span>PrzygotowujÄ™ przestrzeÅ„...</span>
      </div>
    </section>

    <!-- ARCHITEKT PRZESTRZENI -->
    <section class="glass-panel architect-panel" id="architectPanel">
      <div class="architect-header" id="architectHeader">
        <div class="architect-title-wrapper">
          <span class="architect-icon">ğŸ—ï¸</span>
          <div>
            <div class="architect-title">Architekt przestrzeni</div>
            <div class="architect-subtitle">PrzestrzeÅ„ 3D â€” dotknij i przeciÄ…gnij</div>
          </div>
        </div>
        <span class="expand-icon">â–¼</span>
      </div>

      <div class="architect-content">
        <div class="architect-inner">
          
          <!-- Canvas Visualization -->
          <div class="canvas-container">
            <canvas id="spatialCanvas"></canvas>
            <div class="canvas-hint">Dotknij obiekt i przeciÄ…gnij aby zmieniÄ‡ pozycjÄ™</div>
          </div>

          <!-- Scenes (Simplified) -->
          <h3 class="panel-title">ğŸŒ PrzestrzeÅ„ tÅ‚a</h3>
          <div class="scene-grid" id="sceneGrid" role="radiogroup">
            <!-- Scene items will be generated by JS -->
          </div>

          <!-- Scene Volume Control (wspÃ³lny suwak) -->
          <div class="scene-volume-control" id="sceneVolumeControl" style="display: none;">
            <label>
              <span>ğŸ”Š GÅ‚oÅ›noÅ›Ä‡ przestrzeni</span>
              <span class="volume-value" id="sceneVolumeValue">50%</span>
            </label>
            <div class="range-wrapper">
              <div class="range-fill" id="sceneVolumeFill"></div>
              <input type="range" id="sceneVolume" min="0" max="100" value="50" aria-label="GÅ‚oÅ›noÅ›Ä‡ przestrzeni tÅ‚a">
            </div>
          </div>

          <!-- Objects (Simplified) -->
          <h3 class="panel-title">ğŸ”® DÅºwiÄ™ki</h3>
          <div class="objects-grid" id="objectsGrid">
            <!-- Object items will be generated by JS -->
          </div>

          <!-- Position Controls (dla wybranego obiektu) - POD OBIEKTAMI -->
          <div class="position-controls-3d" id="positionControls3d" style="display: none;">
            <div class="panel-header-3d">
              <h3 class="panel-title">ğŸ“ Pozycja wybranego obiektu</h3>
              <button type="button" class="btn-close-3d" aria-label="Zamknij panel kontroli 3D">âœ–</button>
            </div>
            
            <!-- Suwak gÅ‚oÅ›noÅ›ci bazowej -->
            <div class="slider-3d-group">
              <label>
                <span>ğŸ”Š GÅ‚oÅ›noÅ›Ä‡ bazowa</span>
                <span class="slider-3d-value" id="baseVolumeValue">100%</span>
              </label>
              <input type="range" id="baseVolume3d" min="0" max="200" value="100" 
                     aria-label="GÅ‚oÅ›noÅ›Ä‡ bazowa obiektu">
            </div>

            <div class="slider-3d-group">
              <label>
                <span>OdlegÅ‚oÅ›Ä‡</span>
                <span class="slider-3d-value" id="distanceValue">20m</span>
              </label>
              <input type="range" id="distance3d" min="1" max="100" value="20" 
                     aria-label="OdlegÅ‚oÅ›Ä‡ od centrum">
            </div>

            <div class="slider-3d-group">
              <label>
                <span>Azymut (lewo â†” prawo)</span>
                <span class="slider-3d-value" id="azimuthValue">0Â°</span>
              </label>
              <input type="range" id="azimuth3d" min="0" max="360" value="0" 
                     aria-label="Azymut - pozycja pozioma">
            </div>

            <div class="slider-3d-group">
              <label>
                <span>Elevacja (gÃ³ra â†• dÃ³Å‚)</span>
                <span class="slider-3d-value" id="elevationValue">0Â°</span>
              </label>
              <input type="range" id="elevation3d" min="-90" max="90" value="0" 
                     aria-label="Elevacja - pozycja pionowa">
            </div>
          </div>

          <!-- Timer -->
          <div class="timer-section">
            <div class="timer-header">
              <div class="timer-label">Czas trwania przestrzeni</div>
              <div class="timer-display" id="timerDisplay">--:--</div>
            </div>
            <div class="timer-presets">
              <button class="btn-timer-preset" data-minutes="5">5 min</button>
              <button class="btn-timer-preset" data-minutes="10">10 min</button>
              <button class="btn-timer-preset" data-minutes="15">15 min</button>
              <button class="btn-timer-preset" data-minutes="20">20 min</button>
              <button class="btn-timer-preset" data-minutes="30">30 min</button>
              <button class="btn-timer-preset" data-minutes="60">60 min</button>
            </div>
            <div class="timer-controls">
              <button class="btn-timer" id="btnTimerStart">Uruchom timer</button>
              <button class="btn-timer" id="btnTimerStop" style="display:none;">Zatrzymaj timer</button>
            </div>
          </div>

        </div>
      </div>
    </section>

  </div>

  <!-- Status Message -->
  <div class="status-message" id="statusMessage" role="status" aria-live="polite"></div>

  <!-- JavaScript -->
  <script src="script.js"></script>
</body>
</html>
